# Multer

> Multer is a node.js middleware for handling multipart/form-data, which is primarily used for uploading files.

## Installation

```bash
$ yarn add multer
```
## Configuration file

Set filename and destination. Random name generated by 'crypto'.

```multerconfig.js```
```js
const multer = require('multer');
const path = require('path');
const crypto = require('crypto');

module.exports = {
    storage: multer.diskStorage({
        destination: path.resolve(__dirname, 'uploads'),
        filename: (req, file, cb) => {
            crypto.randomBytes(16, (err, res) => {
                if (err) return cb(err);

                return cb(null, res.toString('hex') + path.extname(file.originalname));
            })
        },
    })
}
```

## Using the middleware
 
 ```js
const express = require('express');
const multer = require('multer');
const multerConfig = require('./multerconfig');

const app = express();
const upload = multer(multerConfig);

app.post('/files', upload.single('file'), (req, res) => {
    return res.json({ok:true});
})

app.listen(3000);
 ```

## Conclusion

A new post request using ```multipart/form-data``` format can upload a new file using the ```file``` field. The new file will stored in ```uploads````directory.